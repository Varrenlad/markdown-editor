(function(b){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=b();else if("function"==typeof define&&define.amd)define([],b);else{var c;c="undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?this:self:global:window,c.toMarkdown=b()}})(function(){return function h(j,k,m){function p(w,x){if(!k[w]){if(!j[w]){var y="function"==typeof require&&require;if(!x&&y)return y(w,!0);if(q)return q(w,!0);var z=new Error("Cannot find module '"+w+"'");throw z.code="MODULE_NOT_FOUND",z}var A=k[w]={exports:{}};j[w][0].call(A.exports,function(B){var C=j[w][1][B];return p(C?C:B)},A,A.exports,h,j,k,m)}return k[w].exports}for(var q="function"==typeof require&&require,v=0;v<m.length;v++)p(m[v]);return p}({1:[function(h,j){"use strict";function m(K){return-1!==I.indexOf(K.nodeName.toLowerCase())}function p(K){return-1!==J.indexOf(K.nodeName.toLowerCase())}function q(K){var L=new G().parseFromString(K,"text/html");return H(L.documentElement,m),L}function v(K){for(var N,O,P,L=[K],M=[];0<L.length;)for(N=L.shift(),M.push(N),O=N.childNodes,P=0;P<O.length;P++)1===O[P].nodeType&&L.push(O[P]);return M.shift(),M}function w(K){for(var L="",M=0;M<K.childNodes.length;M++)if(1===K.childNodes[M].nodeType)L+=K.childNodes[M]._replacement;else if(3===K.childNodes[M].nodeType)L+=K.childNodes[M].data;else continue;return L}function y(K,L){if("string"==typeof L)return L===K.nodeName.toLowerCase();if(Array.isArray(L))return-1!==L.indexOf(K.nodeName.toLowerCase());if("function"==typeof L)return L.call(C,K);throw new TypeError("`filter` needs to be a string, array, or function")}function z(K,L){var M,N,O;return"left"===K?(M=L.previousSibling,N=/ $/):(M=L.nextSibling,N=/^ /),M&&(3===M.nodeType?O=N.test(M.nodeValue):1===M.nodeType&&!m(M)&&(O=N.test(M.textContent))),O}function A(K,L){var M="",N="";if(!m(K)){var O=/^[ \r\n\t]/.test(L),P=/[ \r\n\t]$/.test(L);O&&!z("left",K)&&(M=" "),P&&!z("right",K)&&(N=" ")}return{leading:M,trailing:N}}function B(K){var L,M=w(K);if(!p(K)&&!/A|TH|TD/.test(K.nodeName)&&/^\s*$/i.test(M))return void(K._replacement="");for(var O,N=0;N<D.length;N++)if(O=D[N],y(K,O.filter)){if("function"!=typeof O.replacement)throw new TypeError("`replacement` needs to be a function that returns a string");var P=A(K,M);(P.leading||P.trailing)&&(M=M.trim()),L=P.leading+O.replacement.call(C,M,K)+P.trailing;break}K._replacement=L}var C,D,E=h("./lib/md-converters"),F=h("./lib/gfm-converters"),G=h("./lib/html-parser"),H=h("collapse-whitespace"),I=["address","article","aside","audio","blockquote","body","canvas","center","dd","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frameset","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","isindex","li","main","menu","nav","noframes","noscript","ol","output","p","pre","section","table","tbody","td","tfoot","th","thead","tr","ul"],J=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];C=function(K,L){if(L=L||{},"string"!=typeof K)throw new TypeError(K+" is not a string");if(""===K)return"";K=K.replace(/(\d+)\. /g,"$1\\. ");var O,M=q(K).body,N=v(M);D=E.slice(0),L.gfm&&(D=F.concat(D)),L.converters&&(D=L.converters.concat(D));for(var P=N.length-1;0<=P;P--)B(N[P]);return O=w(M),O.replace(/^[\t\r\n]+|[\t\r\n\s]+$/g,"").replace(/\n\s+\n/g,"\n\n").replace(/\n{3,}/g,"\n\n")},C.isBlock=m,C.isVoid=p,C.outer=function(K,L){return K.cloneNode(!1).outerHTML.replace("><",">"+L+"<")},j.exports=C},{"./lib/gfm-converters":2,"./lib/html-parser":3,"./lib/md-converters":4,"collapse-whitespace":7}],2:[function(h,j){"use strict";function m(q,v){var w=Array.prototype.indexOf.call(v.parentNode.childNodes,v),x=" ";return 0===w&&(x="| "),x+q+" |"}var p=/highlight highlight-(\S+)/;j.exports=[{filter:"br",replacement:function(){return"\n"}},{filter:["del","s","strike"],replacement:function(q){return"~~"+q+"~~"}},{filter:function(q){return"checkbox"===q.type&&"LI"===q.parentNode.nodeName},replacement:function(q,v){return(v.checked?"[x]":"[ ]")+" "}},{filter:["th","td"],replacement:function(q,v){return m(q,v)}},{filter:"tr",replacement:function(q,v){var w="",x={left:":--",right:"--:",center:":-:"};if("THEAD"===v.parentNode.nodeName)for(var y=0;y<v.childNodes.length;y++){var z=v.childNodes[y].attributes.align,A="---";z&&(A=x[z.value]||A),w+=m(A,v.childNodes[y])}return"\n"+q+(w?"\n"+w:"")}},{filter:"table",replacement:function(q){return"\n\n"+q+"\n\n"}},{filter:["thead","tbody","tfoot"],replacement:function(q){return q}},{filter:function(q){return"PRE"===q.nodeName&&q.firstChild&&"CODE"===q.firstChild.nodeName},replacement:function(q,v){return"\n\n```\n"+v.firstChild.textContent+"\n```\n\n"}},{filter:function(q){return"PRE"===q.nodeName&&"DIV"===q.parentNode.nodeName&&p.test(q.parentNode.className)},replacement:function(q,v){var w=v.parentNode.className.match(p)[1];return"\n\n```"+w+"\n"+v.textContent+"\n```\n\n"}},{filter:function(q){return"DIV"===q.nodeName&&p.test(q.className)},replacement:function(q){return"\n\n"+q+"\n\n"}}]},{}],3:[function(h,j){function q(){var w=!1;try{document.implementation.createHTMLDocument("").open()}catch(x){window.ActiveXObject&&(w=!0)}return w}var v="undefined"==typeof window?this:window;j.exports=function(){var w=v.DOMParser,x=!1;try{new w().parseFromString("","text/html")&&(x=!0)}catch(y){}return x}()?v.DOMParser:function(){var w=function(){};if("undefined"==typeof document){var x=h("jsdom");w.prototype.parseFromString=function(y){return x.jsdom(y,{features:{FetchExternalResources:[],ProcessExternalResources:!1}})}}else w.prototype.parseFromString=q()?function(y){var z=new window.ActiveXObject("htmlfile");return z.designMode="on",z.open(),z.write(y),z.close(),z}:function(y){var z=document.implementation.createHTMLDocument("");return z.open(),z.write(y),z.close(),z};return w}()},{jsdom:6}],4:[function(h,j){"use strict";j.exports=[{filter:"p",replacement:function(m){return"\n\n"+m+"\n\n"}},{filter:"br",replacement:function(){return"  \n"}},{filter:["h1","h2","h3","h4","h5","h6"],replacement:function(m,p){for(var q=p.nodeName.charAt(1),v="",w=0;w<q;w++)v+="#";return"\n\n"+v+" "+m+"\n\n"}},{filter:"hr",replacement:function(){return"\n\n* * *\n\n"}},{filter:["em","i"],replacement:function(m){return"_"+m+"_"}},{filter:["strong","b"],replacement:function(m){return"**"+m+"**"}},{filter:function(m){var p=m.previousSibling||m.nextSibling,q="PRE"===m.parentNode.nodeName&&!p;return"CODE"===m.nodeName&&!q},replacement:function(m){return"`"+m+"`"}},{filter:function(m){return"A"===m.nodeName&&m.getAttribute("href")},replacement:function(m,p){var q=p.title?" \""+p.title+"\"":"";return"["+m+"]("+p.getAttribute("href")+q+")"}},{filter:"img",replacement:function(m,p){var q=p.alt||"",v=p.getAttribute("src")||"",w=p.title||"",x=w?" \""+w+"\"":"";return v?"!["+q+"]("+v+x+")":""}},{filter:function(m){return"PRE"===m.nodeName&&"CODE"===m.firstChild.nodeName},replacement:function(m,p){return"\n\n    "+p.firstChild.textContent.replace(/\n/g,"\n    ")+"\n\n"}},{filter:"blockquote",replacement:function(m){return m=m.trim(),m=m.replace(/\n{3,}/g,"\n\n"),m=m.replace(/^/gm,"> "),"\n\n"+m+"\n\n"}},{filter:"li",replacement:function(m,p){m=m.replace(/^\s+/,"").replace(/\n/gm,"\n    ");var q="*   ",v=p.parentNode,w=Array.prototype.indexOf.call(v.children,p)+1;return q=/ol/i.test(v.nodeName)?w+".  ":"*   ",q+m}},{filter:["ul","ol"],replacement:function(m,p){for(var q=[],v=0;v<p.childNodes.length;v++)q.push(p.childNodes[v]._replacement);return /li/i.test(p.parentNode.nodeName)?"\n"+q.join("\n"):"\n\n"+q.join("\n")+"\n\n"}},{filter:function(m){return this.isBlock(m)},replacement:function(m,p){return"\n\n"+this.outer(p,m)+"\n\n"}},{filter:function(){return!0},replacement:function(m,p){return this.outer(p,m)}}]},{}],5:[function(h,j){j.exports=["address","article","aside","audio","blockquote","canvas","dd","div","dl","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","main","nav","noscript","ol","output","p","pre","section","table","tfoot","ul","video"]},{}],6:[function(){},{}],7:[function(h,j){"use strict";function m(z){return!!(z&&y[z.nodeName])}function p(z){return!!(z&&x[z.nodeName])}function v(z){var A=z.nextSibling||z.parentNode;return z.parentNode.removeChild(z),A}function w(z,A){return z&&z.parentNode===A||"PRE"===A.nodeName?A.nextSibling||A.parentNode:A.firstChild||A.nextSibling||A.parentNode}var x=h("void-elements");Object.keys(x).forEach(function(z){x[z.toUpperCase()]=1});var y={};h("block-elements").forEach(function(z){y[z.toUpperCase()]=1}),j.exports=function(z,A){if(z.firstChild&&"PRE"!==z.nodeName){"function"!=typeof A&&(A=m);for(var B=null,C=!1,D=null,E=w(D,z);E!==z;){if(3===E.nodeType){var F=E.data.replace(/[ \r\n\t]+/g," ");if(B&&!/ $/.test(B.data)||C||" "!==F[0]||(F=F.substr(1)),!F){E=v(E);continue}E.data=F,B=E}else if(1===E.nodeType)A(E)||"BR"===E.nodeName?(B&&(B.data=B.data.replace(/ $/,"")),B=null,C=!1):p(E)&&(B=null,C=!0);else{E=v(E);continue}var G=w(D,E);D=E,E=G}B&&(B.data=B.data.replace(/ $/,""),!B.data&&v(B))}}},{"block-elements":5,"void-elements":8}],8:[function(h,j){j.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,menuitem:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}},{}]},{},[1])(1)});